<div class="create-page">
    <!-- Header -->
    <div class="page-header">
        <button class="back-btn" (click)="goBack()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
        </button>
        <div class="header-content">
            <h1>Thêm nhân viên kho</h1>
            <p class="subtitle">Điền thông tin để tạo tài khoản nhân viên mới</p>
        </div>
    </div>

    <!-- Success Message -->
    @if (success()) {
    <div class="alert alert-success">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <span>Tạo nhân viên thành công! Đang chuyển hướng...</span>
    </div>
    }

    <!-- Error Message -->
    @if (error()) {
    <div class="alert alert-error">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="15" y1="9" x2="9" y2="15"></line>
            <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        <span>{{ error() }}</span>
        <button class="close-btn" (click)="error.set(null)">×</button>
    </div>
    }

    <!-- Form Card -->
    <div class="form-card">
        <form (ngSubmit)="onSubmit()">
            <!-- Company Info -->
            <div class="form-section">
                <h2>Công ty</h2>
                <div class="company-info">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    <span class="company-name">{{ companyName() }}</span>
                </div>
            </div>

            <!-- Personal Info -->
            <div class="form-section">
                <h2>Thông tin cá nhân</h2>

                <div class="form-group">
                    <label for="fullName">Họ và tên <span class="required">*</span></label>
                    <input type="text" id="fullName" [ngModel]="fullName()" (ngModelChange)="fullName.set($event)"
                        name="fullName" placeholder="VD: Nguyễn Văn A" maxlength="100" required />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="phone">Số điện thoại <span class="required">*</span></label>
                        <input type="tel" id="phone" [ngModel]="phone()"
                            (ngModelChange)="phone.set($event); onPhoneChange()" name="phone"
                            placeholder="VD: 0901234567" maxlength="15" required />
                    </div>

                    <div class="form-group">
                        <label for="email">Email <span class="required">*</span></label>
                        <input type="email" id="email" [ngModel]="email()" (ngModelChange)="email.set($event)"
                            name="email" placeholder="VD: nhanvien@company.com" required />
                    </div>
                </div>
            </div>

            <!-- Account Info -->
            <div class="form-section">
                <h2>Tài khoản đăng nhập</h2>

                <div class="form-group">
                    <label for="username">Tên đăng nhập</label>
                    <input type="text" id="username" [ngModel]="username()" (ngModelChange)="username.set($event)"
                        name="username" placeholder="Tự động tạo từ SĐT" maxlength="50" />
                    <span class="help-text">Để trống sẽ tự động tạo từ số điện thoại</span>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="password">Mật khẩu <span class="required">*</span></label>
                        <input type="password" id="password" [ngModel]="password()"
                            (ngModelChange)="password.set($event)" name="password" placeholder="Ít nhất 6 ký tự"
                            minlength="6" required />
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Xác nhận mật khẩu <span class="required">*</span></label>
                        <input type="password" id="confirmPassword" [ngModel]="confirmPassword()"
                            (ngModelChange)="confirmPassword.set($event)" name="confirmPassword"
                            placeholder="Nhập lại mật khẩu" required />
                    </div>
                </div>
            </div>

            <!-- Warehouse Info -->
            <div class="form-section">
                <h2>Thông tin công việc</h2>

                <div class="form-group">
                    <label for="warehouseLocation">Vị trí kho làm việc <span class="required">*</span></label>
                    <input type="text" id="warehouseLocation" [ngModel]="warehouseLocation()"
                        (ngModelChange)="warehouseLocation.set($event)" name="warehouseLocation"
                        placeholder="VD: Kho Tân Bình, TP.HCM" maxlength="200" required />
                    <span class="help-text">Địa điểm kho mà nhân viên sẽ làm việc</span>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn btn-outline" (click)="goBack()" [disabled]="loading()">
                    Hủy
                </button>
                <button type="submit" class="btn btn-primary" [disabled]="loading()">
                    @if (loading()) {
                    <span class="spinner"></span>
                    Đang tạo...
                    } @else {
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                    </svg>
                    Tạo nhân viên
                    }
                </button>
            </div>
        </form>
    </div>
</div>